<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>标题标题</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/animate.css">

    <!-- Demo styles -->
    <style>
    .swiper-container {
        width: 100%;
        height: 100%;
    }
    .swiper-slide {
        /*text-align: center;*/
        /*font-size: 18px;*/
        /*background: #fff;*/
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
    }
    </style>
</head>
<body>



    <!-- 横屏提示代码 [[ -->
    <div id="orientation_hinter" class="landscape">
        <div class="hinter_phone"><i></i></div>
        <div class="hinter_rotate"></div>
        <div class="hinter_text landscape">竖屏体验效果更佳</div>
        <div class="hinter_text portrait">横屏体验效果更佳</div>
    </div>
    <!-- 横屏提示代码 ]] -->

    <!-- 竖屏提示代码 [[ -->
    <!-- <div id="orientation_hinter" class="portrait">
        <div class="hinter_phone"><i></i></div>
        <div class="hinter_rotate"></div>
        <div class="hinter_text landscape">竖屏体验效果更佳</div>
        <div class="hinter_text portrait">横屏体验效果更佳</div>
    </div> -->
    <!-- 竖屏提示代码 ]] -->



    <!-- LOADING代码 [[ -->
    <div class="preloader">
        <div class="preloader-container">
            <div class="preloader-img">
                
            </div>
            <div class="preloader-text">已加载<span class="preloader-percent percent">0%</span></div>
        </div>
        
    </div>
    <!-- LOADING代码 ]] -->


    <!-- 页面主体 [[ -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="wrap">
                    <div class="pic pic-blur pic-1"></div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="wrap">
                    <div class="pic pic-blur pic-2"></div>
                </div>
            </div>
            <div class="swiper-slide">Slide 3</div>
            <div class="swiper-slide">Slide 4</div>
        </div>
        <!-- Add Pagination -->
        <!-- <div class="swiper-pagination"></div> -->
    </div>
    <!-- 页面主体 ]] -->


    <!-- 音频代码 [[ -->
    <a href="javascript:;" id="bgMusicContr" class="music"></a>
    <audio id="bgMusic" src="https://demo.cdc.im/luke/wechatPro/assets/media/music.1dfb.mp3" loop="" preload="auto"></audio>
    <!-- 音频代码 ]] -->



    <!-- Swiper JS -->
    <script src="./js/zepto.min.js"></script>
    <script src="./js/swiper.jquery.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script src="./js/preloader.js"></script>

    <!-- Initialize Swiper -->
    <script>
    (function() {

        'use strict';
        // 预加载资源
        var preload = [
            // './media/music.1dfb.mp3',
            './images/bg1.jpg',
            './images/bg2.jpg',
            './images/data/sound@2x.257e.png',
            './images/data/sound_muted@2x.a2c6.png',
            './images/data/testloading2.jpg',
            './images/data/testloading3.jpg',
            './images/data/testloading4.jpg',
            './images/data/testloading5.jpg',
            './images/data/testloading6.jpg',
            './images/data/testloading7.jpg',
            './images/data/testloading8.jpg',
            './images/data/testloading9.jpg',
            './images/data/testloading10.jpg',
            './images/data/testloading11.jpg',
            './images/data/testloading12.jpg',
            './images/data/testloading13.jpg'
        ];

        var clickEvent = (document.ontouchstart!==null) ? 'click' : 'touchstart';
        var transitionEvent = whichTransitionEvent();
        var animationEvent = whichAnimationEvent();


        function whichTransitionEvent(){
            var t,
                el = document.createElement("fakeelement");

            var transitions = {
                "transition"      : "transitionend",
                "OTransition"     : "oTransitionEnd",
                "MozTransition"   : "transitionend",
                "WebkitTransition": "webkitTransitionEnd"
            }

            for (t in transitions){
                if (el.style[t] !== undefined){
                    return transitions[t];
                }
            }
        }

        function whichAnimationEvent(){
            var t,
                el = document.createElement("fakeelement");

            var animations = {
                "animation"      : "animationend",
                "OAnimation"     : "oAnimationEnd",
                "MozAnimation"   : "animationend",
                "WebkitAnimation": "webkitAnimationEnd"
            }

            for (t in animations){
                if (el.style[t] !== undefined){
                    return animations[t];
                }
            }
        }
        
        // 预加载动画
        new preloader({
            files: preload,
            progress: function(err, response, percent) {
                $('.percent').text(percent + '%');
            },
            complete: function() {
                // 隐藏加载器
                $('.preloader').addClass('loaded');
                $('.preloader').on(animationEvent, function() {
                    $('.preloader').remove();
                    // setTimeout(function() {
                    //     $('.point .avatar').remove();
                    // }, 200);
                });

                // window.mySlider = new iSlider(sliderOpts);
                var swiper = new Swiper('.swiper-container', {
                    pagination: '.swiper-pagination',
                    paginationClickable: true
                });
                if (typeof localStorage !== undefined) {
                    var musicDefault = localStorage.getItem('musicDefault');
                    if(musicDefault === 'true') {
                        bgAudio.play();
                    }
                } else {
                    bgAudio.play();
                }
            }
        });


        // var swiper = new Swiper('.swiper-container', {
        //     pagination: '.swiper-pagination',
        //     paginationClickable: true
        // });


        // var clickEvent = (document.ontouchstart!==null) ? 'click' : 'touchstart';

        // wx.ready(function() {

        //     // 分享到朋友圈
        //     wx.onMenuShareTimeline({
        //         title: '标题标题标题标题', // 分享标题
        //         // link: 'http://wj.qq.com/activities/2016/04/cdc_ten/index.html', // 分享链接
        //         link: window.location.href,
        //         imgUrl: 'http://www.padding-left.com/wp-content/jt/24hours/images/cover.jpg', // 分享图标
        //         success: function () {
        //             // 用户确认分享后执行的回调函数
        //             typeof MtaH5 !== 'undefined' && MtaH5.clickStat('cdc10.sharetimeline');
        //         },
        //         cancel: function () {
        //             // 用户取消分享后执行的回调函数
        //         }
        //     });

        //     // 分享给好友
        //     wx.onMenuShareAppMessage({
        //         title: '标题标题标题标题', // 分享标题
        //         desc: 'descdescdesc', // 分享描述
        //         // link: 'http://wj.qq.com/activities/2016/04/cdc_ten/index.html', // 分享链接
        //         link: window.location.href,
        //         imgUrl: 'http://www.padding-left.com/wp-content/jt/24hours/images/cover.jpg', // 分享图标
        //         type: 'link', // 分享类型,music、video或link，不填默认为link
        //         dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        //         success: function () {
        //             // 用户确认分享后执行的回调函数
        //             typeof MtaH5 !== 'undefined' && MtaH5.clickStat('cdc10.sharefriend');
        //         },
        //         cancel: function () {
        //             // 用户取消分享后执行的回调函数
        //         }
        //     });
        // });

        

        var cUrl = window.location.href.replace(window.location.hash, '');
        $.ajax({
            url: 'http://5minute.cdc.qq.com/wxjssdk-signature/sign.php',
            type: 'GET',
            data: {url: cUrl},
            dataType: 'jsonp',
            success: function(res) {
                wx.config({
                        debug: false,
                        appId: res.data.appId,
                        timestamp: res.data.timestamp,
                        nonceStr: res.data.nonceStr,
                        signature: res.data.signature,
                        jsApiList: [
                            'onMenuShareTimeline',
                            'onMenuShareAppMessage',
                            'onMenuShareQQ',
                            'onMenuShareWeibo',
                            'onMenuShareQZone',
                            'startRecord',
                            'stopRecord',
                            'onVoiceRecordEnd',
                            'playVoice',
                            'pauseVoice',
                            'stopVoice',
                            'onVoicePlayEnd',
                            'uploadVoice',
                            'downloadVoice'
                        ]
                });
            }
        });

    })();
    </script>
    <script src="./js/comm.js"></script>
</body>
</html>